spring:
  jackson:
    date-format: dd-MM-yyyy HH:mm
    time-zone: Europe/Moscow
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      adjust-dates-to-context-time-zone: true
  application:
    name: FrolovsNails

  # Конфигурация PostgreSQL
  datasource:
    url: jdbc:postgresql://localhost:5432/frolovsnails
    username: admin
    password: securepassword
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10

  jpa:
    hibernate:
      ddl-auto: validate  # Liquibase будет управлять схемой
#      ddl-auto: update
    properties:
      hibernate:
        show_sql: false  # Отключаем, т.к. будет много запросов
        format_sql: true
        # Включаем статистику для отладки N+1
        generate_statistics: false
        # Оптимизация для EntityGraph
        default_batch_fetch_size: 20
        order_inserts: true
        order_updates: true
        jdbc:
          batch_size: 20

  # Liquibase миграции
  liquibase:
    change-log: classpath:/db/changelog/db.changelog-master.yaml
    enabled: true

  devtools:
    restart:
      enabled: true

server:
  port: 8080
  address: 0.0.0.0  # ← слушаем все интерфейсы

logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.stat: DEBUG  # Статистика запросов
    org.hibernate.orm.jdbc.bind: TRACE
    # Отключаем подробные логи для EntityGraph (много информации)
    org.hibernate.loader.plan: WARN

springdoc:
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method
    tags-sorter: alpha
    try-it-out-enabled: true
    display-request-duration: true
    # Включаем авторизацию в UI
    oauth:
      client-id: test-client-id
      realm: frolovsnails
      app-name: FrolovsNails API
    # Дополнительные настройки
    disable-swagger-default-url: true
    config-url: /v3/api-docs/swagger-config
    url: /v3/api-docs
    urls:
      - url: /v3/api-docs
        name: FrolovsNails API (Local)
      - url: http://192.168.0.151:8080/v3/api-docs  # ← IP на работе
        name: FrolovsNails API (Network)
  api-docs:
    path: /v3/api-docs
    enabled: true
  show-actuator: true

app:
  schedule:
    client-slot-minutes: 150  # 2.5 часа в минутах
  security:
    jwt:
      secret-key: "404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970" # 256-bit key
      expiration: 86400000 # 24 часа в миллисекундах
      refresh-token:
        expiration: 604800000 # 7 дней в миллисекундах